<%- include('./layouts/header') %>

<% if(typeof(cart) !== "undefined") { %>
    <div class="container">
        <h1 class="page-title text-center">My Cart</h1><br>
    
        <table class="table table-striped">
            <tr>
                <th scope="col">Image</th>
                <th scope="col">Product</th>
                <th scope="col">Price</th>
                <th scope="col">Quantity</th>
                <th scope="col"></th>
                <th scope="col">Sub-total</th>
            </tr>
            <% var total = 0 %>
            <% for(let product of cart) { %>
                <% var sub = product.qty * product.price %>
                <% total += sub %>
                <tr>
                    <td><img src="<%=product.image[0].url%>" class="img-thumbnail"  style="width: 80px; height: 80px;"></td>
                    <td><%=product.title%></td>
                    <td>&#x20B9;<%=product.price%></td>
                    <td><%=product.qty%></td>
                    <td>
                        <a href="/cart/update/<%=product.title%>?action=add">+</a>&nbsp;
                        <a href="/cart/update/<%=product.title%>?action=remove">-</a>&nbsp;
                        <a href="/cart/update/<%=product.title%>?action=clear">Clear</a>&nbsp;
                    </td>
                    <td>&#x20B9;<%=sub%></td>
                </tr>
            <% } %>
            <tr>
                <td colspan="6" align="right"><b>Grand Total: </b>&#x20B9;<%=total%></td>
            </tr>
            <tr>
                <td colspan="5" align="right">
                    <a href="/cart/clear" class="btn btn-danger clear">Clear cart</a>    
                </td>
                <td colspan="5" align="right">
                    <a href="#" class="btn btn-success buynow">Checkout</a>
                </td>
            </tr>
        </table>
    </div>
<% } else { %>
    <h2 class="text-center">Your Cart is Empty !</h2>
<% } %>

<%- include('./layouts/footer') %>
